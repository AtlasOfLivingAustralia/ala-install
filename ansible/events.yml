- hosts: events
  roles:
    - common
    - webserver
    - events
  vars:
    docker_dir: "/data/docker"

- hosts: elasticsearch
  vars:
    es_version: "7.17.7"
    es_heap_dump_path: "/data/"
    es_api_host: "{{ elasticsearch_host | default('localhost') }}"
    es_heap_size: "8g"
    es_config:
      cluster.name: "extended-data"
      node.name: "{{ elasticsearch_host | default('localhost') }}"
      network.host: "{{ elasticsearch_network_host }}"
      discovery.seed_hosts: "{{ elasticsearch_seed_hosts }}"
      bootstrap.memory_lock: false
  roles:
    - common
    - java
    - { role: ansible-elasticsearch, es_templates: false, es_instance_name: 'ecodata-elasticsearch', es_data_dirs: ['/data/elasticsearch'], tags: ['elasticsearch'], when: install_elasticsearch | bool }