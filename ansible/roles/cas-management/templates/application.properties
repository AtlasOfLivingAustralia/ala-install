# CAS server that management app will authenticate with
# This server will authenticate for any app (service) and you can login as casuser/Mellon
cas.server.name={{ cas_server_name }}
cas.server.prefix=${cas.server.name}/{{ cas_context_path | default('cas') }}

mgmt.serverName={{ cas_management_server_name }}
mgmt.adminRoles[0]=ROLE_ADMIN
mgmt.authzAttributes[0]=role
mgmt.userPropertiesFile=file:/data/cas-management/config/users.properties
mgmt.version-control.enabled={{ cas_management_enable_version_control | default('false') }}
mgmt.version-control.services-repo={{ cas_management_services_repo | default('/data/cas-management/services-repo') }}
mgmt.delegated.user-repos-dir={{ cas_management_user_repos_dir | default('/data/cas-management/user-repos') }}

server.servlet.context-path=/{{ cas_management_context_path | default('cas-management') }}
server.port={{ cas_management_server_port | default(8070) }}
server.ssl.enabled=false

spring.thymeleaf.mode=HTML
logging.config=file:/data/cas-management/config/log4j2.xml

#logging.config=file:/etc/cas/config/log4j2-management.xml

cas.authn.attributeRepository.jdbc[0].dataSourceName=
cas.authn.attributeRepository.jdbc[0].url=jdbc:mysql://{{ cas_db_hostname | default('localhost') }}:{{ cas_db_port | default('3306') }}/{{ cas_db_name | default('emmet') }}?serverTimezone={{ server_tz | default('Australia/Sydney') }}&zeroDateTimeBehavior=convertToNull
cas.authn.attributeRepository.jdbc[0].user={{cas_db_username | default('cas') }}
cas.authn.attributeRepository.jdbc[0].password={{cas_db_password | default('password') }}

#cas.serviceRegistry.mongo.sslEnabled={{ cas_services_ssl_enabled | default('false') }}
cas.serviceRegistry.mongo.clientUri={{ cas_services_uri | default('') }}
cas.serviceRegistry.mongo.databaseName={{ cas_services_db | default('services') }}
#cas.serviceRegistry.mongo.host={{ cas_services_host | default('localhost') }}
#cas.serviceRegistry.mongo.port={{ cas_services_port | default('27017') }}
#cas.serviceRegistry.mongo.replicaSet={{ cas_services_replica_set | default('') }}
#cas.serviceRegistry.mongo.collection={{ cas_services_collection | default('services') }}
#cas.serviceRegistry.mongo.authenticationDatabaseName={{ cas_services_auth_db | default('') }}
#cas.serviceRegistry.mongo.userId={{ cas_services_username | default('cas') }}
#cas.serviceRegistry.mongo.password={{ cas_services_password | default('password') }}

spring.session.enabled={{ spring_session_enabled | default('false') }}
spring.session.store-type={{ spring_session_store_type | default('none') }}
{% if spring_session_store_type == 'mongodb' %}
spring.session.mongodb.collectionName={{ spring_session_mongo_collection | default('cas-mgmt-sessions') }}
spring.data.mongodb.uri={{ spring_session_mongo_uri }}
{% endif %}
